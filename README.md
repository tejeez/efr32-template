# Template for EFR32 programming

See example/ for a Makefile template and a small example program
for EFR32FG13P231F512GM48.

Edit the Makefile to add source files, include paths and defines
for your program.

Edit the `GECKOSDK` variable to point to the correct path within
a Simplicity Studio installation. It's also possible to copy the
necessary SDK files into the same repository and use a relative path.

To change the EFR32 chip, edit the Makefile below the comment
"EFR32 chip specific parts".

The Makefile can be also used for other microcontrollers by changing
SDK paths, linker script, startup code and processor core configuration.
Some parts are actually based on Makefiles generated by STM32CubeMX.


# Using command line tools on Ubuntu

Install ARM toolchain:

    sudo apt install make gcc-arm-none-eabi libnewlib-arm-none-eabi gdb-multiarch openocd

Compile the program:

    cd example
    make

To program and debug the chip, start OpenOCD:

    openocd -f board/efm32.cfg

While OpenOCD is running, start GDB:

    gdb-multiarch build/example.elf -ex "tar rem :3333"

Use these GDB commands to flash and run the program:

    load
    mon reset halt
    c


# Using Visual Studio Code

VS Code can be used as an IDE for development and debugging.

The ARM toolchain is also available as a VS Code extension,
which seems to be the easiest way to install it on Windows.

Install and use the following extensions:

* **C/C++** (Microsoft): for C syntax highlighting and code browsing
* **Cortex-Debug** (marus25): to debug ARM microcontrollers
* **windows-arm-none-eabi**, **linux-arm-none-eabi** or **darwin-arm-none-eabi**
  (metalcode-eu): optional, to install the toolchain through VS Code

Example configuration for Cortex-Debug is under `example/.vscode`.

To start programming, choose *File -> Open Folder*
and choose the `example` folder.
Press Ctrl+Shift+B to compile and F5 to start debugging.
Remember to compile the code before debugging.


# Licensing

The Makefile template, example program and this documentation
are distributed under the MIT license.
For parts of Gecko SDK, check their respective licenses.
